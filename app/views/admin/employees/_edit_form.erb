<div class="row">
  <div class="col-6">
    <div class="container" style="padding-top: 0; width: 70%;">
      <%= form_for([namespace, page.resource], html: { class: "form" }) do |f| %>
        Name : <%= f.text_field :name %><br />
        Email : <%= f.email_field :email %><br />
        Role : <%= f.select(:role, ['Employee', 'Admin'], :prompt => 'Select') %><br/>
        Profile Picture : <%= f.file_field :profile_picture %>
        <%= f.hidden_field :lat%>
        <%= f.hidden_field :long%>
        <br />
        <%= f.submit %>
      <% end %>
    </div>
  </div>
  <div class="col-6">
    <div style="width:100%; height: 480px" id="mapContainer"></div>
  </div>
</div>

<script>
  function setUpClickListener(map) {
    map.addEventListener('tap', function (evt) {
      var coord = map.screenToGeo(evt.currentPointer.viewportX,
              evt.currentPointer.viewportY);
      var marker = new H.map.Marker(new H.geo.Point(coord.lat, coord.lng));
      console.log(coord.lat, coord.lng)
      $(document).find('.container').find('#employee_lat').val(coord.lat)
      $(document).find('.container').find('#employee_long').val(coord.lng)
      map.removeObjects(map.getObjects());
      map.addObject(marker);
    });
  }

  // Initialize the platform object:
  var platform = new H.service.Platform({
  'apikey': 'YGUmMw55U3s1mArR6tdoAcyWVizGAIAub2kxDtp_Xic'
  });

  // Obtain the default map types from the platform object
  var maptypes = platform.createDefaultLayers();

  // Instantiate (and display) a map object:
  var map = new H.Map(
  document.getElementById('mapContainer'),
  maptypes.vector.normal.map,
  {
    zoom: 15,
    center: { lng: <%= @show_employee.long%>, lat: <%= @show_employee.lat%> }
  });

  window.addEventListener('resize', () => map.getViewPort().resize());
  var behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));
  var ui = H.ui.UI.createDefault(map, maptypes);

  var berlinMarker = new H.map.Marker({lat:<%= @show_employee.lat%>, lng:<%= @show_employee.long%>});
  map.addObject(berlinMarker);
  
  setUpClickListener(map)
</script>


  







